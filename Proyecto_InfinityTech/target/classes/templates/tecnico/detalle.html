<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout :: layout('Detalle ticket (Técnico)', ~{::section})}">
<section>
  <div class="page-head">
    <div>
      <h1 class="page-title">Ticket <span class="muted">#</span><span th:text="${ticket.folio}">000</span></h1>
      <p class="page-subtitle">Diagnóstico + presupuesto (₡) y estado.</p>
    </div>
    <div class="card-actions">
      <a class="btn" th:href="@{/tecnico/tickets}">Volver</a>
      <a class="btn" th:href="@{/tecnico/repuestos}">Repuestos</a>
    </div>
  </div>

  <div class="grid grid-2">
    <div class="card">
      <h2 class="card-title">Información</h2>
      <p class="muted small">Cliente: <b th:text="${ticket.clienteNombre}"></b></p>
      <p class="muted small">Equipo: <b th:text="${ticket.equipo}"></b></p>
      <p class="muted small">Técnico: <b th:text="${ticket.tecnicoAsignado != null ? ticket.tecnicoAsignado : 'Sin asignar'}"></b></p>
      <p class="muted small">Estado: <b th:text="${ticket.estado}"></b></p>
      <hr class="divider"/>
      <div class="label">Problema reportado</div>
      <div class="muted" th:text="${ticket.problema}"></div>
    </div>

    <div class="card">
      <h2 class="card-title">Actualizar diagnóstico</h2>

      <form class="form" th:action="@{/tecnico/tickets/{id}/diagnostico(id=${ticket.id})}" method="post">
        <div>
          <div class="label">Diagnóstico</div>
          <textarea class="textarea" name="diagnostico" th:text="${ticket.diagnostico}"></textarea>
        </div>

        <div class="row">
          <div>
            <div class="label">Estado (opcional)</div>
            <select class="select" name="estado">
              <option value="">No cambiar</option>
              <option th:each="e: ${estados}" th:value="${e}" th:text="${e}"></option>
            </select>
          </div>

          <div>
            <div class="label">Presupuesto ₡ (opcional)</div>
            <input class="input" name="presupuesto" type="number" step="0.01"
                   th:value="${ticket.presupuesto}" placeholder="Ej: 25000" />
          </div>
        </div>

        <button class="btn btn-primary" type="submit">Guardar</button>
      </form>
    </div>
  </div>
</section>
</html>